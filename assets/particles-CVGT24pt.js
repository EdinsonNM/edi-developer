import{r,j as F,c as H}from"./index-DHfN41mj.js";function V(){const[i,d]=r.useState({x:0,y:0});return r.useEffect(()=>{const l=h=>{d({x:h.clientX,y:h.clientY})};return window.addEventListener("mousemove",l),()=>{window.removeEventListener("mousemove",l)}},[]),i}function W(i){i=i.replace("#",""),i.length===3&&(i=i.split("").map(x=>x+x).join(""));const d=parseInt(i,16),l=d>>16&255,h=d>>8&255,R=d&255;return[l,h,R]}const k=({className:i="",quantity:d=100,staticity:l=50,ease:h=50,size:R=.4,refresh:x=!1,color:Y="#ffffff",vx:T=0,vy:b=0})=>{const f=r.useRef(null),g=r.useRef(null),s=r.useRef(null),y=r.useRef([]),z=V(),v=r.useRef({x:0,y:0}),n=r.useRef({w:0,h:0}),m=typeof window<"u"?window.devicePixelRatio:1,E=r.useRef(null),p=r.useRef();r.useEffect(()=>{f.current&&(s.current=f.current.getContext("2d")),P(),A();const t=()=>{p.current&&clearTimeout(p.current),p.current=setTimeout(()=>{P()},200)};return window.addEventListener("resize",t),()=>{E.current!=null&&window.cancelAnimationFrame(E.current),p.current&&clearTimeout(p.current),window.removeEventListener("resize",t)}},[Y]),r.useEffect(()=>{$()},[z.x,z.y]),r.useEffect(()=>{P()},[x]);const P=()=>{I(),S()},$=()=>{if(f.current){const t=f.current.getBoundingClientRect(),{w:e,h:o}=n.current,a=z.x-t.left-e/2,u=z.y-t.top-o/2;a<e/2&&a>-e/2&&u<o/2&&u>-o/2&&(v.current.x=a,v.current.y=u)}},I=()=>{if(g.current&&f.current&&s.current){n.current.w=g.current.offsetWidth,n.current.h=g.current.offsetHeight,f.current.width=n.current.w*m,f.current.height=n.current.h*m,f.current.style.width=`${n.current.w}px`,f.current.style.height=`${n.current.h}px`,s.current.scale(m,m),y.current=[];for(let t=0;t<d;t++){const e=C();M(e)}}},C=()=>{const t=Math.floor(Math.random()*n.current.w),e=Math.floor(Math.random()*n.current.h),o=0,a=0,u=Math.floor(Math.random()*2)+R,c=0,w=parseFloat((Math.random()*.6+.1).toFixed(1)),X=(Math.random()-.5)*.1,B=(Math.random()-.5)*.1,D=.1+Math.random()*4;return{x:t,y:e,translateX:o,translateY:a,size:u,alpha:c,targetAlpha:w,dx:X,dy:B,magnetism:D}},L=W(Y),M=(t,e=!1)=>{if(s.current){const{x:o,y:a,translateX:u,translateY:c,size:w,alpha:X}=t;s.current.translate(u,c),s.current.beginPath(),s.current.arc(o,a,w,0,2*Math.PI),s.current.fillStyle=`rgba(${L.join(", ")}, ${X})`,s.current.fill(),s.current.setTransform(m,0,0,m,0,0),e||y.current.push(t)}},j=()=>{s.current&&s.current.clearRect(0,0,n.current.w,n.current.h)},S=()=>{j();const t=d;for(let e=0;e<t;e++){const o=C();M(o)}},N=(t,e,o,a,u)=>{const c=(t-e)*(u-a)/(o-e)+a;return c>0?c:0},A=()=>{j(),y.current.forEach((t,e)=>{const a=[t.x+t.translateX-t.size,n.current.w-t.x-t.translateX-t.size,t.y+t.translateY-t.size,n.current.h-t.y-t.translateY-t.size].reduce((c,w)=>Math.min(c,w)),u=parseFloat(N(a,0,20,0,1).toFixed(2));if(u>1?(t.alpha+=.02,t.alpha>t.targetAlpha&&(t.alpha=t.targetAlpha)):t.alpha=t.targetAlpha*u,t.x+=t.dx+T,t.y+=t.dy+b,t.translateX+=(v.current.x/(l/t.magnetism)-t.translateX)/h,t.translateY+=(v.current.y/(l/t.magnetism)-t.translateY)/h,M(t,!0),t.x<-t.size||t.x>n.current.w+t.size||t.y<-t.size||t.y>n.current.h+t.size){y.current.splice(e,1);const c=C();M(c)}}),E.current=window.requestAnimationFrame(A)};return F.jsx("div",{className:H("pointer-events-none",i),ref:g,"aria-hidden":"true",children:F.jsx("canvas",{ref:f,className:"size-full"})})},G=k;export{G as P};
